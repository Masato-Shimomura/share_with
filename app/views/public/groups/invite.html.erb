<h2>メンバー招待</h2>

<!-- 検索フォーム + ユーザー選択フォームを1つのformにまとめる -->
<%= form_with url: new_public_group_path, method: :get, local: true do %>
  <!-- 検索キーワード -->
  <div class="form-group">
    <%= label_tag :keyword, "ユーザー検索" %>
    <%= text_field_tag :keyword, params[:keyword], placeholder: "名前、メールアドレスなど", class: "form-control" %>
    <%= submit_tag "検索", name: nil, class: "btn btn-primary", style: "margin-top: 5px;" %>
  </div>

  <!-- ユーザー一覧 -->
  <div class="user-list" style="margin-top: 20px;">
    <% @users.each do |user| %>
      <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 5px;">
        <%= check_box_tag "invited_user_ids[]", user.id, false, id: "user_#{user.id}" %>
        <%= label_tag "user_#{user.id}", "#{user.last_name} #{user.first_name}（#{user.email}）" %>
      </div>
    <% end %>
  </div>

  <!-- 招待操作 -->
  <div class="form-actions" style="margin-top: 20px;">
    <%= submit_tag "OK", class: "btn btn-success" %>
    <%= link_to "戻る", public_groups_path, class: "btn btn-secondary", style: "margin-left: 10px;" %>
  </div>
<% end %>